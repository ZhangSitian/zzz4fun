网关的职责：
    性能：
        API高可用
        负载均衡
        容错机制
    安全：
        登录
        权限身份认证
        脱敏
        流量清洗
        后端签名（保证全链路可信调用）
        黑名单（非法调用的限制）
    日志：
        日志记录（spainid,traceid）
    缓存：
        数据缓存
    监控：
        记录请求响应数据
        api耗时分析
        性能监控
    限流：
        流量控制
        错峰流控
        熔断
    灰度：
        线上灰度部署
        可以减小风险
    路由：
        动态路由规则
    测试：
        压力测试
        ABtest
        调试路由


切面：
    0.生成流水号
    1.HttpServletRequest转为clientHeader
    2.请求头日志打印
    3.请求头参数校验
        校验请求时间
        签名不能为空
        nonce值不能为空
    4.防重放 nonce
    5.限流
    6.验签 sign
    7.当用户登录时
        a.验证 token（授权）
        b.限制单个用户请求频次
    8.请求base64解析
    9.请求体格式校验
    10.请求体日志打印

    业务处理
        用户信息查询

    11.响应签名
    12.响应base64


流水号
    日期yyMMdd（6）+ 机房编号（2）+ 机器编号（4） + 系统编号（3） + uuid（33 - 16 =17）= 32


clientHeader
    请求时间
    签名sign
    nonce
    客户端版本号
    屏幕大小
    手机型号
    mac地址
    操作系统名称
    操作系统版本号
    longitude
    latitude
    ip地址
    本机ip地址
    来源类型
    token



公共请求定义
    head
        业务名
        流水号
        来源类型
        token
    data


公共响应定义
    head
        retCode 返回码
        retMsg 返回消息
        requestTime 请求时间
        responseTime 响应时间
        sign 签名
    data
